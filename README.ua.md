# API для управління фільмами

Веб-додаток для управління колекцією фільмів з акторами. Цей додаток надає RESTful API для створення, читання, оновлення та видалення фільмів та пов'язаних з ними акторів, а також аутентифікацію користувачів.

## Функціональність

- Реєстрація користувачів та аутентифікація з використанням JWT
- Управління фільмами (CRUD операції)
- Управління акторами (автоматично створюються та пов'язуються з фільмами)
- Пошук та фільтрація фільмів за назвою або актором
- Сортування фільмів за назвою або роком випуску
- Імпорт фільмів з текстових файлів
- Підтримка Docker для легкого розгортання

## Використані технології

- Node.js
- Express.js
- Sequelize ORM
- База даних SQLite
- JSON Web Tokens (JWT) для аутентифікації
- Docker для контейнеризації

## Структура проекту

- `/src` - Вихідний код
  - `/config` - Конфігурація бази даних
  - `/middleware` - Middleware для аутентифікації
  - `/models` - Моделі бази даних (Фільм, Актор, Користувач)
  - `/movies` - Контролер фільмів та маршрути
  - `/user` - Контролер користувачів та маршрути аутентифікації
  - `/utils` - Службові функції (парсинг файлів)
- `/pages` - HTML-сторінки для користувацького інтерфейсу
- `server.js` - Головна точка входу в додаток
- `Dockerfile` - Конфігурація Docker

## API Endpoints

### Аутентифікація

- `POST /user/create` - Реєстрація нового користувача
- `POST /user/login` - Вхід та отримання JWT токена

### Фільми (Захищені маршрути - потребують аутентифікації)

- `GET /movies` - Список всіх фільмів (з опціональною фільтрацією та сортуванням)
- `GET /movies/:id` - Отримання конкретного фільму за ID
- `POST /movies/add` - Додавання нового фільму з акторами
- `PATCH /movies/:id` - Оновлення фільму
- `DELETE /movies/:id` - Видалення фільму
- `POST /movies/import` - Імпорт фільмів з текстового файлу

## Початок роботи

### Передумови

- Node.js (рекомендується v22.12.0 або новіше)
- npm

### Встановлення

1. Клонуйте репозиторій
2. Встановіть залежності:
   ```
   npm install
   ```
3. Створіть файл `.env` з наступними змінними:
   ```
   PORT=8000
   JWT_SECRET=your_jwt_secret
   DB_PATH=./dev.sqlite
   ```

### Запуск додатку

Режим розробки:
```
npm run dev
```

Виробничий режим:
```
npm start
```

### Розгортання з Docker

Збудуйте та запустіть Docker контейнер:
```
docker build -t movies-app .
docker run -p 8000:8000 movies-app
```

Або використовуйте Docker Compose:
```
docker-compose up
```
Або ви можете витягнути цей проєкт з Docker-хабу за допомогою цієї команди
```
docker pull johnny491/movies:latest 
docker run -p 8000:8000 johnny491/movies:latest
```

## Формат імпорту файлів

Додаток підтримує імпорт фільмів з текстових файлів у наступному форматі:

```
Title: Назва фільму
Release Year: 2023
Format: DVD
Stars: Актор 1, Актор 2, Актор 3

Title: Інший фільм
Release Year: 2022
Format: Blu-ray
Stars: Актор 4, Актор 5
```